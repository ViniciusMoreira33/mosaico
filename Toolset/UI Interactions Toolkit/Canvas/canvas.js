document.addEventListener("DOMContentLoaded",function(){var t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/fabric@4.5.1/dist/fabric.min.js",t.onload=function(){document.querySelectorAll('[data-identifier="canvas"]').forEach(function(t){var e=document.createElement("canvas"),a=t.clientWidth,i=t.clientHeight;e.width=a,e.height=i,t.appendChild(e);var r=new fabric.Canvas(e),n="draw"===t.getAttribute("data-canvas-actions");r.isDrawingMode=n;var l=parseInt(t.getAttribute("data-canvas-brush-width")||"2"),o=t.getAttribute("data-canvas-brush-color")||"#000000";r.freeDrawingBrush.width=l,r.freeDrawingBrush.color=o;var s=t.getAttribute("data-canvas-border-color")||"#000000",c=t.getAttribute("data-canvas-corner-color")||"#ff0000",d=parseInt(t.getAttribute("data-canvas-corner-size")||"10"),g="true"===t.getAttribute("data-canvas-transparent-corners"),u="false"!==t.getAttribute("data-canvas-has-controls"),f="false"!==t.getAttribute("data-canvas-has-borders"),p="false"!==t.getAttribute("data-canvas-has-rotation-point");function h(t){t.borderColor=s,t.cornerColor=c,t.cornerSize=d,t.transparentCorners=g,t.hasControls=u,t.hasBorders=f,t.hasRotatingPoint=p}function b(t){t.borderColor=s,t.cornerColor=c,t.cornerSize=d,t.transparentCorners=g,t.hasBorders=f,t.hasControls=u}r.on("selection:created",function(t){"activeSelection"===t.target.type&&b(t.target)}),r.on("selection:updated",function(t){"activeSelection"===t.target.type&&b(t.target)});var v=t.querySelectorAll('[data-identifier="canvas-rectangle"]');v.forEach(function(t){var e,a,i=parseInt(t.getAttribute("data-rectangle-width"))||100,n=parseInt(t.getAttribute("data-rectangle-height"))||100,l=t.getAttribute("data-rectangle-fill")||"#FFA629",o=t.getAttribute("data-rectangle-top").split(",").map(Number),s=t.getAttribute("data-rectangle-left").split(",").map(Number),c=window.innerWidth;e=1===o.length?o[0]:c>=992?o[0]:c<=991&&c>=768?o[1]:c<=767&&c>=479?o[2]:o[3],a=1===s.length?s[0]:c>=992?s[0]:c<=991&&c>=768?s[1]:c<=767&&c>=479?s[2]:s[3];var d="true"===t.getAttribute("data-rectangle-controls"),g=new fabric.Rect({fill:l,width:i,height:n,hasControls:d,hasRotatingPoint:d,selectable:d,originalWidth:i,originalHeight:n,originalScaleX:1,originalScaleY:1});g.set({left:a,top:e,originalLeft:a,originalTop:e}),h(g),t.style.display="none",r.add(g)});var A=t.querySelectorAll('[data-identifier="canvas-triangle"]');A.forEach(function(t){var e,a,i=parseInt(t.getAttribute("data-triangle-width"))||100,n=parseInt(t.getAttribute("data-triangle-height"))||100,l=t.getAttribute("data-triangle-fill")||"#FFA629",o=t.getAttribute("data-triangle-top").split(",").map(Number),s=t.getAttribute("data-triangle-left").split(",").map(Number),c=window.innerWidth;e=1===o.length?o[0]:c>=992?o[0]:c<=991&&c>=768?o[1]:c<=767&&c>=479?o[2]:o[3],a=1===s.length?s[0]:c>=992?s[0]:c<=991&&c>=768?s[1]:c<=767&&c>=479?s[2]:s[3];var d="true"===t.getAttribute("data-triangle-controls"),g=new fabric.Triangle({fill:l,width:i,height:n,hasControls:d,hasRotatingPoint:d,selectable:d,originalWidth:i,originalHeight:n,originalScaleX:1,originalScaleY:1});g.set({left:a,top:e,originalLeft:a,originalTop:e}),h(g),t.style.display="none",r.add(g)});var m=t.querySelectorAll('[data-identifier="canvas-circle"]');m.forEach(function(t){var e,a,i=parseInt(t.getAttribute("data-circle-radius"))||50,n=t.getAttribute("data-circle-fill")||"#FFA629",l=t.getAttribute("data-circle-top").split(",").map(Number),o=t.getAttribute("data-circle-left").split(",").map(Number),s=window.innerWidth;e=1===l.length?l[0]:s>=992?l[0]:s<=991&&s>=768?l[1]:s<=767&&s>=479?l[2]:l[3],a=1===o.length?o[0]:s>=992?o[0]:s<=991&&s>=768?o[1]:s<=767&&s>=479?o[2]:o[3];var c="true"===t.getAttribute("data-circle-controls"),d=new fabric.Circle({radius:i,fill:n,hasControls:c,hasRotatingPoint:c,selectable:c,originalRadius:i,originalScaleX:1,originalScaleY:1});d.set({left:a,top:e,originalLeft:a,originalTop:e}),h(d),t.style.display="none",r.add(d)});var w=t.querySelectorAll('[data-identifier="canvas-ellipse"]');w.forEach(function(t){var e,a,i=parseInt(t.getAttribute("data-ellipse-rx"))||50,n=parseInt(t.getAttribute("data-ellipse-ry"))||25,l=t.getAttribute("data-ellipse-fill")||"#FFA629",o=t.getAttribute("data-ellipse-top").split(",").map(Number),s=t.getAttribute("data-ellipse-left").split(",").map(Number),c=window.innerWidth;e=1===o.length?o[0]:c>=992?o[0]:c<=991&&c>=768?o[1]:c<=767&&c>=479?o[2]:o[3],a=1===s.length?s[0]:c>=992?s[0]:c<=991&&c>=768?s[1]:c<=767&&c>=479?s[2]:s[3];var d="true"===t.getAttribute("data-ellipse-controls"),g=new fabric.Ellipse({rx:i,ry:n,fill:l,hasControls:d,hasRotatingPoint:d,selectable:d,originalRx:i,originalRy:n});g.set({left:a,top:e,originalScaleX:g.scaleX,originalScaleY:g.scaleY,originalLeft:a,originalTop:e}),h(g),t.style.display="none",r.add(g)});var S=t.querySelectorAll('[data-identifier="canvas-text"]');S.forEach(function(t){var e,a,i=t.getAttribute("data-canvas-text-string")||"Default Text",n=t.getAttribute("data-canvas-text-top").split(",").map(Number),l=t.getAttribute("data-canvas-text-left").split(",").map(Number),o=window.innerWidth;e=1===n.length?n[0]:o>=992?n[0]:o<=991&&o>=768?n[1]:o<=767&&o>=479?n[2]:n[3],a=1===l.length?l[0]:o>=992?l[0]:o<=991&&o>=768?l[1]:o<=767&&o>=479?l[2]:l[3];var s=t.getAttribute("data-canvas-text-color")||"#000000",c=new fabric.Text(i,{fill:s});c.set({left:a,top:e,originalLeft:a,originalTop:e,originalScaleX:c.scaleX,originalScaleY:c.scaleY}),h(c),t.style.display="none",r.add(c)});var y=t.querySelectorAll('[data-identifier="canvas-itext"]');y.forEach(function(t){var e,a,i=t.getAttribute("data-canvas-itext-string")||"Editable Text",n=t.getAttribute("data-canvas-itext-top").split(",").map(Number),l=t.getAttribute("data-canvas-itext-left").split(",").map(Number),o=window.innerWidth;e=1===n.length?n[0]:o>=992?n[0]:o<=991&&o>=768?n[1]:o<=767&&o>=479?n[2]:n[3],a=1===l.length?l[0]:o>=992?l[0]:o<=991&&o>=768?l[1]:o<=767&&o>=479?l[2]:l[3];var s=t.getAttribute("data-canvas-itext-color")||"#000000",c=new fabric.IText(i,{fill:s});c.set({left:a,top:e,originalLeft:a,originalTop:e,originalScaleX:c.scaleX,originalScaleY:c.scaleY}),h(c),t.style.display="none",r.add(c)});var C=t.querySelectorAll('[data-identifier="canvas-image"]');C.forEach(function(t){var e,a,i=t.getAttribute("data-canvas-image-url"),n=t.getAttribute("data-canvas-image-top").split(",").map(Number),l=t.getAttribute("data-canvas-image-left").split(",").map(Number),o=window.innerWidth;e=1===n.length?n[0]:o>=992?n[0]:o<=991&&o>=768?n[1]:o<=767&&o>=479?n[2]:n[3],a=1===l.length?l[0]:o>=992?l[0]:o<=991&&o>=768?l[1]:o<=767&&o>=479?l[2]:l[3],fabric.Image.fromURL(i,function(i){i.set({originalLeft:a,originalTop:e,originalScaleX:i.scaleX,originalScaleY:i.scaleY}),i.set({left:a,top:e}),h(i),t.style.display="none",r.add(i)})}),window.addEventListener("resize",function(){var e="true"===t.getAttribute("data-canvas-scale"),n=t.clientWidth,l=t.clientHeight;if(e){var o=n/a,s=l/i,c=Math.min(o,s);r.setWidth(a*c),r.setHeight(i*c),r.getObjects().forEach(function(t){t.scaleX=t.originalScaleX*c,t.scaleY=t.originalScaleY*c,t.left=t.originalLeft*c,t.top=t.originalTop*c,t.setCoords()})}else r.setWidth(n),r.setHeight(l);r.setViewportTransform([1,0,0,1,0,0]),r.renderAll(),r.calcOffset()})})},document.head.appendChild(t)});
